<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/"></ion-back-button>
        </ion-buttons>
        <ion-title>Objektverwaltung</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content padding>
    <ion-grid *fivIf="['desktop']" fixed>
        <ion-row>
            <ion-col size="12">
                <app-breadcrumb></app-breadcrumb>
                <ion-card>
                    <fiv-toolbar-search (close)="onSearchbarClose()" (fivInputChange)="applySearchFilter($event)"
                        placeholder="Name oder Adresse eingeben" title="Objektverwaltung">
                    </fiv-toolbar-search>
                    <ion-card-header>
                        <ion-card-subtitle>Immobilien anlegen und verwalten</ion-card-subtitle>
                        <ion-button matTooltip="Immobilie anlegen" (click)="addProperty()">
                            Immobilie anlegen
                        </ion-button>
                    </ion-card-header>
                    <ion-card-content>
                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z0" matSort>

                            <!-- Name Column -->
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                                <td mat-cell *matCellDef="let element"> {{element.name}}</td>
                            </ng-container>
                            <!-- Name Column -->
                            <ng-container matColumnDef="streetAndNo">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Straße</th>
                                <td mat-cell *matCellDef="let element"> {{element.streetAndNo}}</td>
                            </ng-container>
                            <!-- Name Column -->
                            <ng-container matColumnDef="zip">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>PLZ</th>
                                <td mat-cell *matCellDef="let element"> {{element.zip}}</td>
                            </ng-container>
                            <!-- Name Column -->
                            <ng-container matColumnDef="city">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ort</th>
                                <td mat-cell *matCellDef="let element"> {{element.city}}</td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)">
                            </tr>
                        </table>
                        <mat-paginator [pageSizeOptions]="[15, 30, 50, 100]" showFirstLastButtons></mat-paginator>
                    </ion-card-content>
                </ion-card>

            </ion-col>
        </ion-row>
    </ion-grid>


    <ion-list lines="full" *fivIf="['mobile']">
        <ion-item (click)="navigateToProperty(prop.id)"
            *ngFor="let prop of properties | async | propertiesfilter : searchInput">
            <ion-label text-wrap>
                <ion-text>
                    <h3>{{prop.name}}</h3>
                </ion-text>
                <p>{{prop.address}}</p>
            </ion-label>
        </ion-item>
    </ion-list>

</ion-content>