<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="abort()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ng-container *ngIf="currentUser as u">
      <ion-title *fivPermissions="['ROLE_HAUSVERWALTER','ROLE_MITARBEITER']; userPermissions [u.role]">Neue Checkliste
        erstellen</ion-title>
      <ion-title *fivPermissions="['ROLE_ADMIN']; userPermissions [u.role]">Neue Checklistenvorlage erstellen
      </ion-title>
    </ng-container>
  </ion-toolbar>
</ion-header>

<ion-content padding *ngIf="currentUser as u">

  <ion-grid fixed>
    <ion-row>
      <ion-col size="12">
        <app-breadcrumb *fivPermissions="['ROLE_HAUSVERWALTER','ROLE_MITARBEITER']; userPermissions [u.role]"></app-breadcrumb>
        <form [formGroup]="checklist">
          <ion-card *ngIf="currentUser as u">
            <fiv-loading-progress-bar (fivComplete)="checklistCreateComplete($event)" #bar></fiv-loading-progress-bar>
            <ion-card-content>
              <ion-item>
                <ion-label position="floating">Namen eingeben</ion-label>
                <ion-input formControlName="name" type="text"></ion-input>
              </ion-item>
              <ion-item *fivPermissions="['ROLE_HAUSVERWALTER','ROLE_MITARBEITER']; userPermissions [u.role]">
                <ion-label>Vorlage auswählen</ion-label>
                <ion-select placeholder="Ohne Vorlage erstellen" [cancelText]="'Abbrechen'"
                  [okText]="'Vorlage auswählen'" slot="end" formControlName="template">
                  <ion-select-option [value]="template" *ngFor="let template of templates | async">{{template.name}}
                  </ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item>
                <ion-label>Als Standardcheckliste festlegen</ion-label>
                <ion-checkbox slot="end" formControlName="default"></ion-checkbox>
              </ion-item>
            </ion-card-content>
            <ion-toolbar color="translucent">
              <ion-buttons slot="end">
                <ion-button [disabled]="checklist.invalid" (click)="createChecklist(bar)">
                  {{checklist?.value.name}} erstellen
                </ion-button>
              </ion-buttons>
            </ion-toolbar>
          </ion-card>

        </form>
      </ion-col>
    </ion-row>
  </ion-grid>



</ion-content>

<!-- <fiv-dialog>
    
  </fiv-dialog> -->