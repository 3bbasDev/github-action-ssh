<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/"></ion-back-button>
        </ion-buttons>
        <ion-title>Benutzerverwaltung</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>

    <ion-grid *fivIf="['desktop']" fixed>
        <ion-row>
            <ion-col size="12">
                <app-breadcrumb></app-breadcrumb>
                <ion-card>
                    <fiv-toolbar-search #search (close)="onSearchbarClose()"
                        (fivInputChange)="applySearchFilter($event)" placeholder="E-Mail oder Name eingeben"
                        title="Meine Benutzer">
                    </fiv-toolbar-search>
                    <ion-card-header>
                        <ion-card-subtitle>Hier können Sie Mitarbeiter- und Hausmeisteraccounts erstellen und bereits
                            vorhandene Benutzer verwalten.</ion-card-subtitle>
                        <ion-button color="primary" matTooltip="Benutzeraccount anlegen" (click)="addUser()">
                            Benutzer hinzufügen
                        </ion-button>
                    </ion-card-header>
                    <ion-card-content>
                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z0" matSort>

                            <!-- Name Column -->
                            <ng-container matColumnDef="firstname">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Vorname</th>
                                <td mat-cell *matCellDef="let element"> {{element.firstname}}</td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="lastname">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Nachname</th>
                                <td mat-cell *matCellDef="let element"> {{element.lastname}}</td>
                            </ng-container>

                            <!-- Email Column -->
                            <ng-container matColumnDef="email">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> E-Mail </th>
                                <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                            </ng-container>

                            <!-- Role Column -->
                            <ng-container matColumnDef="role">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Rolle </th>
                                <td mat-cell *matCellDef="let element"> {{element.role | role}} </td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)">
                            </tr>
                        </table>
                        <mat-paginator [pageSizeOptions]="[15, 30, 50, 100]" showFirstLastButtons></mat-paginator>
                    </ion-card-content>
                </ion-card>


            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-list *fivIf="['mobile']" lines="full">
        <ion-item (click)="navigateToUser(user.id)" *ngFor="let user of users | async | userfilter: searchInput">
            <ion-label text-wrap>
                <ion-text>
                    <h3>{{user.firstname}} {{user.lastname}}</h3>
                </ion-text>
                <p>{{user.email}}</p>
            </ion-label>
        </ion-item>
    </ion-list>

</ion-content>