<ion-header>

    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/" start></ion-back-button>

        </ion-buttons>
        <ion-title>Checklistenvorlagen</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content padding>

    <ion-grid *fivIf="['desktop']" fixed>
        <ion-row>
            <ion-col size="12">
                <app-breadcrumb></app-breadcrumb>
                <ion-card>
                    <fiv-toolbar-search (close)="onSearchbarClose()" (fivInputChange)="applySearchFilter($event)" placeholder="Name eingeben"
                        title="Checklistenvorlagen">
                    </fiv-toolbar-search>
                    <ion-card-header>
                        <ion-card-subtitle>Vorlagen erstellen und bearbeiten</ion-card-subtitle>
                        <ion-button matTooltip="Checklistenvorlage erstellen" (click)="addChecklist()">
                            Checklistenvorlage erstellen </ion-button>
                    </ion-card-header>
                    <ion-card-content>
                            <table mat-table [dataSource]="dataSource" class="mat-elevation-z0" matSort>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                                        <td mat-cell *matCellDef="let element"> {{element.name}}</td>
                                    </ng-container>
                
                                    <!-- Level Column -->
                                    <ng-container matColumnDef="levels">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Anzahl Prüfbereiche</th>
                                        <td mat-cell *matCellDef="let element">{{element.levels.length == 0 ? 'Noch keine Prüfbereiche
                                            angelegt' :
                                            element.levels.length == 1 ? '1 Prüfbereich' : element.levels.length + ' Prüfbereiche'}}</td>
                                    </ng-container>
                
                
                
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)"></tr>
                                </table>
                                <mat-paginator [pageSizeOptions]="[15, 30, 50, 100]" showFirstLastButtons></mat-paginator>                    </ion-card-content>
                </ion-card>

            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-list lines="full" *fivIf="['mobile']">
        <ion-item (click)="navigateToChecklist(checklist.id)" *ngFor="let checklist of checklists | async | checklistsfilter : searchInput">
            <ion-label text-wrap>
                <ion-text>
                    <h3>{{checklist.name}}</h3>
                </ion-text>
                <p>{{checklist.levels.length == 0 ? 'Noch keine Prüfbereiche angelegt' :
                    checklist.levels.length == 1 ? '1 Prüfbereich' : checklist.levels.length + ' Prüfbereiche'}}</p>
            </ion-label>
        </ion-item>
    </ion-list>

</ion-content>