package de.fivethree.immoapps.mail.domain;


import javax.persistence.*;
import java.time.LocalDateTime;
import java.util.HashSet;
import java.util.Set;

@Entity
@Table(name = "mail")
public class Mail {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column
    private String subject;

    @Column
    private String senderAddress;

    @Lob
    @Column
    private String body;

    @Column
    private Boolean htmlMail;

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<MailReceiver> receivers = new HashSet<>();

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<MailReceiver> ccReceivers = new HashSet<>();

    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<MailReceiver> bccReceivers = new HashSet<>();

    @Column
    private LocalDateTime createdDate;

    public Mail() {}

    public Mail(boolean htmlMail, String sender, String subject, String body) {
        this.htmlMail = htmlMail;
        this.senderAddress = sender;
        this.subject = subject;
        this.body = body;
    }

    public LocalDateTime getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(LocalDateTime createdDate) {
        this.createdDate = createdDate;
    }

    public Boolean getHtmlMail() {
        return htmlMail;
    }

    public void setHtmlMail(Boolean htmlMail) {
        this.htmlMail = htmlMail;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public String getSenderAddress() {
        return senderAddress;
    }

    public void setSenderAddress(String senderAddress) {
        this.senderAddress = senderAddress;
    }

    public String getBody() {
        return body;
    }

    public void setBody(String body) {
        this.body = body;
    }

    public Set<MailReceiver> getReceivers() {
        return receivers;
    }

    public void setReceivers(Set<MailReceiver> receivers) {
        this.receivers = receivers;
    }

    public Set<MailReceiver> getCcReceivers() {
        return ccReceivers;
    }

    public void setCcReceivers(Set<MailReceiver> ccReceivers) {
        this.ccReceivers = ccReceivers;
    }

    public Set<MailReceiver> getBccReceivers() {
        return bccReceivers;
    }

    public void setBccReceivers(Set<MailReceiver> bccReceivers) {
        this.bccReceivers = bccReceivers;
    }

    @PrePersist
    protected void onCreate() {
        createdDate = LocalDateTime.now();
    }
}
