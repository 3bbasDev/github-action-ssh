<div class="categories">
  <ion-chip (click)="selectedCat?.id === cat.id ? selectedCat = null : selectedCat = cat;" [ngClass]="{'selected': selectedCat?.id === cat.id}"
    *ngFor="let cat of checklists | async | categories">
    <ion-label>{{cat.name}}</ion-label>
  </ion-chip>
</div>
<ion-item-divider>
  <!-- <ion-icon slot="end" name="md-clipboard"></ion-icon> -->
  <ion-label>Begehungen erstellen</ion-label>
</ion-item-divider>
<mat-tab-group mat-align-tabs="center">
  <mat-tab *ngIf="(checklists | async) as cs">
    <ng-template matTabLabel>
      <span [matBadge]="(cs  | catFilter : selectedCat)?.length" matBadgeOverlap="false">Checklisten</span>
    </ng-template>
    <ng-container *ngIf="(checklists | async) as cs">
      <ion-list>
        <app-checklist (addChecklist)="addChecklist($event)" [first]="f" [last]="l" *ngFor="let checklist of cs | catFilter : selectedCat; let l = last; let f = first"
          [checklist]="checklist" [category]="selectedCat"></app-checklist>
      </ion-list>

    </ng-container>
  </mat-tab>
  <mat-tab *ngIf="kriterien | async as ks">
    <ng-template matTabLabel>
      <span [matBadge]="(ks | kritcat : selectedCat)?.length" matBadgeOverlap="false">Prüfpunkte</span>
    </ng-template>
    <ng-container>
      <app-kriterium [kriterium]="krit" *ngFor="let krit of ks | kritcat : selectedCat">

      </app-kriterium>
      <ion-toolbar>
        <ion-buttons slot="end">
          <ion-button color="secondary" (click)="onAbort()">
            Abbrechen
          </ion-button>
          <ion-button color="primary" (click)="onDone()">
            Fertig
          </ion-button>
        </ion-buttons>
      </ion-toolbar>

    </ng-container>
  </mat-tab>
</mat-tab-group>