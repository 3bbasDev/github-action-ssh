import { Category } from './../../../../shared/types/types';
import { Pipe, PipeTransform } from '@angular/core';
import { Checklist } from 'shared';

@Pipe({
  name: 'kriterien'
})
export class KriterienPipe implements PipeTransform {

  transform(c: Checklist, category: Category): any {
    if (!c) {
      return 'Keine Pr端fpunkte';
    }


    let count = 0;

    if (c.levels && category) {
      c.levels
        .filter(level => level.kriterien.some(kriterium => kriterium.category.id === category.id))
        .forEach(l => {
          if (l.kriterien) {

            count = count + l.kriterien.filter(kriterium => kriterium.category.id === category.id).length;
          }
        });
    } else if (c.levels) {
      c.levels
        .forEach(l => {
          if (l.kriterien) {
            count = count + l.kriterien.length;
          }
        });
    }

    if (count == 0) {
      return 'Keine Pr端fpunkte';
    } else if (count > 1) {
      return count + ' Pr端fpunkte';
    } else {
      return 'Ein Pr端fpunkt';
    }


  }

}
