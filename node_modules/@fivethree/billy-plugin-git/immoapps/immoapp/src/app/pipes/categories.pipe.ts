import { Pipe, PipeTransform } from '@angular/core';
import { Checklist, Category } from 'shared';

@Pipe({
  name: 'categories'
})
export class CategoriesPipe implements PipeTransform {

  transform(value: Checklist[], args?: any): Category[] {
    const temp: Category[] = [];
    if(!value){
      return [];
    }
    value.forEach(c => {
      if(c.levels){
        c.levels.forEach(l => {
          if(l.kriterien){
            l.kriterien.forEach(k => {
              if(k && k.category){
                temp.push(k.category);
              }
            });
          }
          
        });
      }
      
    });

    const ret: Category[] = [];
    temp.forEach(c => {
      if(!ret.some(cat => cat.id == c.id)){
        ret.push(c);
      }
    });

    return ret;
  }

}
